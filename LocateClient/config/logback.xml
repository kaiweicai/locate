<?xml version="1.0" encoding="UTF-8"?>
<configuration scan="true" scanPeriod="30 seconds">
	<appender name="ROLLING"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<prudent>true</prudent>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>
				log/locateGateWay-%d{yyyy-MM-dd}.log
			</fileNamePattern>
			<maxHistory>365</maxHistory>
		</rollingPolicy>
		<encoder>
			<pattern>%date %level [%thread] %logger.%class{0}#%method
				[%file:%line] %msg%n</pattern>
		</encoder>
	</appender>
	<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>%date %level [%thread] %logger.%class{0}#%method
				[%file:%line] %msg%n</pattern>
		</encoder>
		<appender-ref ref="ERR_APPENDER"/>
	</appender>
	<!-- 异步输出 -->
	<appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">
		<!-- 不丢失日志.默认的,如果队列的80%已满,则会丢弃TRACT、DEBUG、INFO级别的日志 -->
		<discardingThreshold>0</discardingThreshold>
		<!-- 更改默认的队列的深度,该值会影响性能.默认值为256 -->
		<queueSize>512</queueSize>
		<!-- 添加附加的appender,最多只能添加一个 -->
		<appender-ref ref="ROLLING" />
	</appender>
	<!-- 业务日志记录文件（BIZ）begin  -->
	<appender name="BIZ_APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>./log/biz/biz.%d{yyyyMMdd}.log</fileNamePattern>
			<maxHistory>365</maxHistory>
		</rollingPolicy>
		<encoder>
            <pattern>%msg%n</pattern>
            <charset>UTF-8</charset> 
        </encoder> 
	</appender>
	<!-- 业务日志记录文件（BIZ）end  -->
	<!--系统错误日志（ERR）begin  -->
	<appender name="ERR_APPENDER" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<fileNamePattern>./log/err/ERR.%d{yyyyMMdd}.log</fileNamePattern>
			<maxHistory>365</maxHistory>
		</rollingPolicy>
		<encoder>
            <pattern>%date %level [%thread] %logger.%class{0}#%method
				[%file:%line] %msg%n</pattern>
            <charset>UTF-8</charset> 
        </encoder> 
         <filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>ERROR</level>
			<onMatch>ACCEPT</onMatch>
			<onMismatch>DENY</onMismatch>
		</filter>
	</appender>
	<!--系统错误日志（ERR）end  -->
	<root>
		<appender-ref ref="STDOUT" />
		<appender-ref ref="ASYNC" />
	</root>

	<logger name="com.locate" level="debug">
	</logger>

	<logger name="quartz" level="ERROR">
	</logger>

	<logger name="com" level="debug">
	</logger>
	<logger name="org.apache" level="ERROR">
	</logger>
	<logger name="org.apache.axis" level="ERROR">
	</logger>
	<logger name="org.springframework" level="DEBUG">
	</logger>
	<logger name="com.locate.common.logging.biz" level="INFO" additivity="false">
		<appender-ref ref="BIZ_APPENDER" />
	</logger>
	<logger name="com.locate.common.logging.err" level="ERROR" additivity="true">
		<appender-ref ref="ERR_APPENDER" />
	</logger>
</configuration>